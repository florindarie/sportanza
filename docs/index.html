<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #00FF73;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #00FF73;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #0E0F1D;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }

            @media screen and (-webkit-min-device-pixel-ratio: 0) {
                .staticrypt-form input[type="password"],
                input[type="text"] {
                    font-size: 16px;
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show"
                                title="Show"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show",
                templateToggleAltHide = "Hide",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"e507435df122c1587755e7a96d1204b63de31828fd7e257ba06522be28b4767ee6f685dc36e5390dcf0264bfb009aa6a11458ff8ba5d03b72cde4c9feec160a98e1c38328627713e10dcbc8628db55689a532de4884e251c3a890b9046c5eb242e35a2e090a06b91b08a04c9b4115ed6b14c97753ea98db296c97e5ec24945f6292dc85c439962021d6dd76631584d1306f63c7b7286dda2306487571d9174c15145ea8175e0b881d25051613db11c306d1b48b4818fa713cc5d9a9595eb686da63dc7e68780424f37f0f307dfad0e19697fe1260136bedd906f7e59aacd678145b3240a9f7569875393cfd61dfab4f14b7e4a386c0f58bc7bc2bd962dece315573c5852c7c7e4800e15912af8a0cbf5820cf1c05ebdb4cbdc20a91ff284657fd3cf729e847aa7714cb62c616deae4c05821a5c0f84fb251f06bbdfc49d4a609ea2be0988611c9957962df32e3454e1719f6ea11d35485907e8dfefdff454acdb43239481520a89bc52e7fcbe94ed1e46b74b022d727174149d2b706c606331ee78e6f77c70e779d2335997ef5a330560e11aadd81347d4cbe311c9164900ef78ad85373fedba1e94eade0d1e9dd80774f055e5a2f3f7d5578127391fa5658c8445c4f9bb22bc46c65f2755bd37c648f80bab120c409faf6ec2738da69c81c1f60ad7f68a9f41e096947deaf522414323731c054f3ac84fab7e5e43155d1f0124d89214d7b1d60b1b288fc0f0b1be6c1027fa80bbbad57762520d343ba63dac88a8a2b2ee4cecec055597d0df0c90d900ca9259780f6674564f53572dd42410730718e19fe44cbb8b5f91fa80c272cdbb31fbb621520b134d930912e027000d860988b9ccb543480de719587411e1fff2ed55642f7bb0ae80c8777e6889a6616598ad5978a22e8c7dd178ce697f339ab5d64c9b619b87d4da0f8a63285f0deebd3860d712982424fa517d215c6c4ef18af3a7c27acae19320a5220b3d7d080a2fa137cfa6a467e9621ec59d7f15507a0cf8b6d2a714678736f26655c7c5eb86f8e7c5f4c85f05e5dd2ad20ecf1feb30a42d980d3a41c74643646c596c5f1dc216da68af559575a9340c7af0d0773dd8ca91673230cc8c0f1065e7bba9a8cd5deb08f670d0b0e26cc317cb9cb0a26d921fa5e988a4cb781456a612163239a870ed4bb88854d8f646398b5f34768d2ca459effa09389bcbd0027c85d3544c58513315d5bbca61744a04116216275c4d9b79528553a99702fb70d1edf4f8e5cb2a2def1c84ce043189e61767027c566bd75e4d69dc61db65c7803dce3b349a6b7574bb3bd3b3096c3418eb0c6f3e9a2ea5cd125481f2ac7c3e3ce61ab7b27ecbea6e988f5c6b203e99919fd9e1049f1bcbf4ace6392f75a10840bab379c19d54502f67376827e319827f52fd4efb73d26990c5c2b3f3e4060a8bdb3b79fe485371bd231c145fad6a958b9559affe3949b1b546eb06d8e3195edb34f2deb232b3087cc0fbb11eb0e582bbf9f54e462e99b6cd41435f4f444d3b618b0277a9793990938d16c5100a23531ffa72465a19a7a75b3c4d32bf0c510f65fdfa951d7b50efe2b7662bf7a5db708733f18a8de4827b01f916cf58e894591ff7d1aac25470bf236995c4108e01fc1812e3890d1c82dc4fe2a0d3e91df87db31c80d3c9705db8332e7448cf2e1efd2f3df3268b29684dcc700db1c67ac32a5683e9bcbd9aee20dbbf2dbdf4544520b92ae39e199162b1da85560b478f959521c354c9b88f23356def450598541ebcea18d71b0aef719304a056e2259025dc5cc3af639d1ee48e6aeb23ce55eaeb308c736ec1fab228439c780c2fb3a310b31e41bcbb9f91c468c88cdf40f4d48c0ac7c99e5b219ac44cf6d1060e1b9e80b9770d78605f11e5c59a218768b4341a44425ff87892d44bc6fbb31d07a3f2d5464940e7100231e229bc18db64ac22932c712a37851da8456a720d7faca9ca18e39d13aa861fa1f779b1e8a4a2aa54415e9ad3ad35454475c5df495b01cf673cc7de855d86003694937aa044e8e9a2f9289f455a1637afe0c8653eec83e60ac60d72551123d2063505697745e857b64be5f5cd7f445dbe6853a4434aacb8f7b5e132872bd5754f14ff1fa13fe161b0c9b6205be8f7c896649b2da25407e54994d1723d4bbfc2fef26d514f6e4159db924457ccb4dea5d6a1bcc45227e5cd2cfccdcad6a3e9b7c16be6d48e5a943563942b60a448020d909ab03823c1f9ae20d333a73fab1d3e03f777cb4d09fb35df13204ca4ce288aa330c396c36ef201394fbe815ada81f44f6022a08c0f46642e9bab9d5074f8087e4d7f46f1ebcf08c3edd4b56ae8c83b026217829950a432301647f0026616c3bad6049363d6b4a43671e2eacd114ab7d72c97f20bbc9801babe25674bc1ed3aeb29a6b8ba569801d64a9f73937a01acfe1b0b62d389fd5a4979c847b620646b1b98165487d20fb36ca76527cc960ff6fd8f02bf9d9bca69ae7ff1dd02623aabe2e03084f14a2d8271b369340b190eba816b05decac49799356a6e8f5b7c0e544ba8c6aa22d56093a77fadd40c6960b411f76c433c01bada45e3a8b99d384511dcffb77a1166ab8b6eeb9613208b1c16c3e080395502635a43f2c7864d8ddb04e6a8368937740ddafd1d46cc9acc73270e5371ff203f2de320564fdc32a5d8c6210515b75b7e3862d7bac6f37f732453527a83ddf1bf95b6eb1261a8a21e0d785cb148d149dc5c308eb64268b1454caa84ef20c90c68014241c2534c0d08b104484bbcee7c31eb1f3e64a7aa9501c4a7c0e90992bc533a7e41a0510671e25645f785d83b7091988648873e8133c1191f7e72e785cb98ddea21af85d5fd51bba857eefb6dea442dd9e680d003be052ac63aa4ed0eb5ae13969425068c5bf3abbb2ec1cadbe8cd334b5d6a9f979f69f9acc2d7ee4ca4a75f4ab2cbf595c0763ab59bdd6d1a3f873c474508146454d8f441ddcb12d551b4ffa3bd1a6a10d6afd3a1682bf96476a3a3d1bf72fd421121e9d8def288d59c81a4edffb7e60a9438d77d31b088d3048c660f42773d2fd48138eba87c0941f344c24e8af05fa96d2e4e59b4d1e26b822d74df210ca09ada70943bc6af4f903519b3ab78da4bca3a171513e2a355a26fb2917c584b625ddb46dfced5bcfe1d4d50aed8364cddfd73c40dbe93b16bfab9936a387dda5b59a4fc0dde119e355c2e3a0b2fd08da04c94caa394315ac0c54ec2bab3596bec4517c53ad2bff0da6958d9d658dbdf69edda00e8d3b48f95b5bd6cbf69a916c450df59fa83a3d2c5ff13ece064ffb63b0f446f6ecb7ee3e7c9062436cd33bad21f1adedf62024a83b0dc0ec502757e9bf088208265722d6c7db754cdab3e50a04949cfdb0f6c649c84b4563915d5f3e9474ad65837486e56724f55c5c2dc65162767621989365c202ee0268b02ee2c8d6007b05ab4a983a0fef95e079023410edc9e5616ed28331776f81e555d37e86f35884a20a4b320321a9e4f65120054888dfc8671f4d9fa52c84489ef11e084e7683a8dda3833c0df5fdc43692eafad0869229b75dad520ea03f4035c99f73bf5bcf6374698c5fc2b05f77ac234c31bfbc5f51fd6236646d1795d458585ac1efedcf27281912200c28940b0afd42d835e4258cd7e2583c7a006187b9b6ccc7a039a34eb8ceff7e8fe92af279b2b22eb26f6b9fcc2b40d6dc27de5da99302ca959325e5179d28242bb5976a684db9e3abf646fb0335108ed688855bbd4ac3d3f81ffa6702a4e2322daa27ac355fb7eb47e42b498856d1b41a180b345b7101ebdecb7c39120ade74364c93f32f0d940ae085a707e88fc02ebac04894d6e8e49f27466c46251d72393584de6af4022e56a4ba4806c105368c79a732a879452efc42d85ce12d53991a362e5472b50c01677a8112e4d42034ec7175da57de66e64d505fe1752bc3be8b9bbde53d757caeeb6036493698c2adb37c7e77b9a44b4d9fb32890fd18823adf0018c9613e43bad5a5f456f1dd47335ba02f500d805f58b187d4cd0ef0e843e1f304908887220827c2dc6da89737ab582bda441c28ba331314cd67a7975a35dd0d4a5927b0a6129f693ff2443c5efdba96277930290c71719d7bd8425db23dafb0330f96c50153e17ed557177f23600e1dc429a8bf642c31d9d0474f5b7a29390869d7451f67e8d60b4da3a38a2c79bbe102579c846c9bf4094d262d060c42b1a02bec44aa672eb31faa169369db13cf0262cf3501182592d79bb6758985bdd1da4ac11ba9c80bfd92acfef2fb78dd7130b57cd60955176f6d30984897a5b08eaafc72bccbbb14587f4f7b3046b6eb8f354811d87962b0c25a05bbb41385b9fa1241288f266ba2d5b2cf8255a69dae6ba482aa9717ab7e309c7206f30ddc6dcd7374b460e849f863f166d714299ed29c8b475fb7a6c5f520886986e16a8236c1401f5d19b306fe8baad1747d92a7e0d113d830e18cf94cc3fce0438bb591bd59e18fe65aed5de14618e3fc1a8cddc78a929da3815d87f0f6a3b929787ee41b1431ea3b7d4b4e4f037422da9adffeb69530b97249066372978ee50f65fe40355e22ac0ac28dbd5c7606837b24fe38e138dee9110c3f8d4be595aa263fc7da8726eb5837c4dad676ca60c97148c27ba7600efa4a11c4b1d0c299b44a9077fd20156cecf5c22a482e3afb3ed24f7865896f6342be207fe4bccd2c1fd1647234d402bd707fe5152a76a22bbec3ecca560fb1dab1d1110342ee0d3bf592ee484959d803c2ce26fcdffb49217338a9b933bda0c180c308148b1af5b20069c5800adaa866afaa7709e4dc25c1060eca4171c256e43779b4e8b921da23cf658dfc3a8dd9faff6f9cd3ec7af9706d7c48fe58377360d8fa7455774d7f2596042b3f7b6c4b7b6ed2e957fe1858373e28e2ec7e2657b9fa8292a9c302c0ac17517aca175d3231daf69a51440ad5a55ddfb280e37e8061b0847ba5e705efffb34f16c411faaf97097895bc733998ef0a82918262688f45200ef5a74bf4e945008aff7076bd84dd2cc62f39063f301b80c1607930d68ee9e957ee0fb238597d9f6615c602c69423d936ee199e55e0f7b9aeb6aa558769b0e9e1ea4e588f273ea00b4c36751686ee0c23d7639df9e47a973d2fbd81608bcb6e212769171c3e44db8b6f5a908a5b3db433ebda076338e647a685a1412822c93ad1d1a3aebbf2bf3e0019e4b5843d45418e057632fc54a22ba4ae6cf67b013d36da4e38f786409d52a8a4b210180e1f93317a9c3da79a51779bb27531afb7b9c83d3ceb178b604aac0c563a422d8114ab67d2ee3ad297d65d23d29f34c0cf625e8ad162b7c76aea10ae15f6be3dbf0e8f488745e3f3b521eeb5e18bf76adca925fc8d3e441ddcf4d136c8b0fc09f6b335e88b13d02b6820a3c2d06632d3020ba7c1f807aa835c12691f86543ecf9f3215f3235fd4857533cbeac0927c25c2e7d10199578ae0d3d0d17d279cecbf43c3cebb1788b3b4ceb3aee71a5aa76960980e5d0f6d1ddb32fe10b5be722a8ff75902b90a8696f7ad0f6b76fcf0f2b2f889944c9b64ccb6154c597b5ff32a0e19f4b22d62fc6d55fdabf38b0cae2eb20e5db22ac0a163f38a3ef92f84b27ddf96149049d9f18cd4ff3c594f4316c8b2b30df2e768821b1b6aeb77f675ead33b91558e883fb0ec841f690e28780db95fbc8ff579f171968994063d2ac8d57c2210e1cb5ad41b192dcaca7a53fe68d9bbd81902dadde1c51073b080428fd7ba07907603701d4fb482fb0686cf31564fe7bae4953f564b255a5c827de0c1f579fbf2ba31b34b0d758d7342fa5000d03610dcdac6dfad0ea358ca42ddf5681f2c3e8bf478031f7445fbac4b2e0c76390964b610407a2b9eaa55fbab094380d48e223a9db68bffc25e64908d193fa170a5e993dcec6b8a008ce7b4ae7610a202ccc810125d90b0983e362709200763a0b51820cdabe819513eba9ad1980ad4d9b09ce170653359fe61caec4c2c6870db0069758d18b16a3cbcc8f6b64e822e63e7e63de47ce8fd2ba9e26fa0a7d938a8c456a1ddc8aac40fc1c932c4eaa2f3a9905bcebd1fc8d5755fe2fdc5d6f821604fb23cb1591d848fe35f3fc63ba70fb84bf1156b109ca2aad4877084fa5955c030303093ab2ea6b21ce3b59bebe4634f82b99a787798a062776804c7b57c03b592a5732368df6b0c5b7a8f559c198e40e0d29f843998e6bb80df312795eacec98a1a8c4fcb4d7f79426087b535ad79af829cacc79fecf89d20462344dddfd155521901514ef93e40fb9f26d20967964303bb9c630f9bcf24cf5d5484e8c90d6044047974f76dfb1c6a655a3892387caaaa06f86e3c614cf69834d80af73c8d88a19c94ed771ed97482899efda4d9916b92959c3900b5bb0d7d5eda989e235c723681e7efc46fa40db303db93db2f2e4f4c7f84b6f0ba3266ab1302bb708630674819ef50459a1a28d2e42c7f3078e60ae6dd96768bd1c6553bf285b6634552395afa9d7a473a41e9e9e5c047d48885afa20d470fdf91fb6285b7dfdbbe922a3e3e05be1bf09cf09fbcc56737738ec453a3cb8e0177575a1a528c5fe8112e14f3ebf7cbcec89b24fd265a5d63d4a3956745550126270f788bd0e12c0cddd184852d54b541cdcd31da729ce362b87ed87a6ccd5832827b9f0c55695da60d109120bb243b89a244ccf459dbcf64af7637d4f45194e11d9fa84956b3288e507242b4b3f6d1de1584db54fa31525bb8ab8d2138e5989fecadbd4b8a94872bffbb03a2cd1fcfc4052c9e39d06b4e98f038108d701e6ad36e580c72944f61700842f9ca5360e084abdeaa9c0bc1d7b4095458af55e57cb2b60d9a994903060d2c35271b567537a9cd8db57d142118be271efe22b043ca0747c5e5a7be037ad150d636666ea59a8d9889531a717449b646d8030d72643ebee9e5e70c784999b07795ead7161ad1afc5aa13f0261dffdf31306a41421272cc3aca8529148a453329368f063118ef079d57d4c4824471e2d17986cc74144c8209b1caa902be302a21564ec1fb4287d7be2048f974b57c4ba10ad9d671a74b1b6fc8daedbfd921cf4cf627692f515354ff279aadb0d365424521c3ed95c032baf2e327471049f4e6e8ffb1c8c3f7c367eda8ea26bb047a9890ddab3dbc13c9216bd0cc0cf6bf2bc56f9d9090aba30db551870a361290278b3c5ca3c388b15a44b327def281446663ac404fdbcfafbbb7ce12a4ae6ce1192f7a92ab5afedba4181a5a4eac2a272440130be4a0eb7033298ed17a941e70840c3e9fd4b5021ee7218c07d327ee9e1b5fc19f531bb664a37031bc1928ed8d01e4ab4ebf520edf78c543ff0b2b68af37ce1d94a2073b9b802d6ba7ab3f77e85ca7ac40cb51a3f10bfdc3cb23b2c9e30fe250298cf45d010ec34babf34b4aafcab5af1e6229eb670f7ec3cd47edea6af0be73b4c76e25abfacd5c3a2b9aa55f559979ab6ced3a5f29a472c55a7a617a4238313ebc184e4ad8083419637f7749c1e1cc719adbbb6a27dba42e5e76f3ee2f59aabde9190bce625aebd4c1d5d821b7a02ef3c09e522879464fdaed471a6266b9f1ff41fcdcc0c38322be353c05bce4a5bf77bf8a0d2beb35e10fb158ec1b67ee5073af29a480fd2d8e7c0c317f015566ee2ec11c74cd1eb632c29859fb2ca7434d2fb4e156c65f401afd4d96561ba4a5b5868d0fc0b7be079919dd13cdb7c7a4da34cc8cfbb608a1d3b7792542aa445b737d5de43e74a6c669b07dd0d07629c9a483e155f3a2574ff2df80f9975f5c496afcc55fce8c23342eeb5eb526a7e51c26a40ad8dcbf933ef3446040615b6a62bfea07b474c48de9469abd473888d38bdb351f27bc50eea409c3d14bb60e23a773c81683a172f0371df837e1c051205e433ca9708c322df507c772ba57d6f9312de0d8105a0be1b5e09718d52967b170b09e7b447f305dba19d942a37c02fc9035c2cd71b455526016d186ee55aa39910b5d6877b7163d5e0a872b1dddb262a16f25c485f628aeab63584dde8521ac11113531038ed60c049fce739998474f67c30cc65356e114b7027be0b5a42cf24bf65b3b46545f1fdbeaed8c13a8f1d0ace6e4d4e95718bf742046fe0984e56a762a62737a44ec81884d4368972967056c6a0a6a5a6cdc0a010831eeea7217e0bb49681751427491b8d450cc9f4c0eabca1290c58a859cd3a3fbfd2dfc9475c963380cf762a60ce5bb35ca87e7d697ca12167695f6dc61324f84b0765645a83ff9a030e0f0823c1ceb299818f6bc98f28a7f4e22f402edee202b3c4cbf2b0e03f0c5ced01f9a22f22c75808ddb8197cd5d1c6d877d08fa87187cee1a166c0a21c112efd356a174545d10e6f5cdafd1a45b292f066946a1816d04cfcc75fa73facaa949e2b6593a31d1b376a72d16681f65115525fc392fee1c0f0a989cb5a49b725fd09cede696c6dca21f6f4010571775361bfb0620cb5512310198a5b2f0430e308583c1a81b894dfb4639e40faddf35e17300f5afd65f3517f55042992c284f7de42504c37a88ba78ab781b1307b4b55cc65c8bc6a5e1712551966027e60013a8f8deb1be2cd59c0e64854788647daa4c11b4838a6a4a7d26a987daedc6ec35afbb99b7d064678160c70b09a53b753fa8354c5285a8e75e7bde8cab7cd50bd8a4dbd543c1863856ff2607d9662fae138ff2fb3149722474e517c747932c193a689186b4fe8ee3e22ccd33fd53d486f2ffa38b4cb88719c89a4caf158dbb4dce5d5561feefd58d8dd71af06ae966760187498817010b74e38f578f99c0835ca1e0c3853acbfd05f84ce30cd7777d84fd2f8f21362468ced2543d3c8f1dadd889271a814575ee8b175ee49c01a23d71273c4711359ef65cd105655fdb6adb66fc2fc81539e2d99c18ae7cb9db38cb4ce29638f1badfc0f49049df27f7381c35d5423fc7bb78b2af5d42862bff8e80ecfb33da10521719608233bf8b0cca7d00ad9055e47811d2b331872a32fac217a42770d3efec58e26d3f910a69866cd36adf1c8b06993c1de4fe3659938b5f6c7408d50797a20cbb2c1273f0cf1aeebed32870f43d9185d51ad52668f189b959d50fe6ca5590bbe27f41f5005f22af4bc9e3069bf149fb07cfd8c4137447e12af0852347e80cdf8240cc21e04d8616c9e14946794e74dffdfa747e4299f6d490fadd9df957d0b4375f6fc4e4e88c6e25eddb91ad03dae7c1c216e0f2235c0cdd37ba66405ca328095e3f9ed5c0a59fafc959f05b33322cec571026010bfabefc971973268746f09e9d3f6d1ff41ae59dae62a653211a8ebe0e1e5e20d51dcc4779e94386005dad29a548ec35c0c26f76a75d6b51636147b64726b4d56df2c120996cd733d8063e7facbb632cbfb13cb88e9e9555f162022dfab46527122a741c3a2bd15c3fd07f94192638259176e7ac2b6f1811ec43728db8d6b27d54933bd14b4521bda58873fecbf2cae108ac65d5af31865e93629e4279b809d208b7758c7b317e37300195f3b9f55dd8f804e92d654b8d30e86312a8fc5e38063c438c6b8771f93acbeb840b2b6a5593b3a596bc1e42154c1d732d74762e8a7bd504c8c49261d62cc642116f9d0399fe392b93f6842563efe04d2db70774fc8a89ca13246096193705ac6d869fdfd18e3ec12be824d3e10257449d9de310067792500e680b048e10ff6a203fa9985d319161c7e0e297079110cf16d97af7e2029e6cbf394ea67a027d2f3223810df40282c0fbe155bb1c623cc32cf1f2f6919b099208ec65e641c6ee3e6432cb84253e1a53cbed71c80fde81134830b3bee4ad33fba47f21b717c6fab1f0c8ab0592bcedbb5368738e3d0fb058b323bb3faba8a22c752dc2d30b6740d53553de74697824ef1ccb45275cf8854c4e991e9681fae79c3fb69ac6c1ae85685c9c19b26eb5b5ab2a083d8130fd8318c5973e441d56d5e80cbd2331c245f4c1bdc09c662d73dea2859eb5cb865b4932b7908f3f472b896a7d0e563ce788d95ada6d7664c64e99e7e543037f2f769986844810752db3b97a8ef3e6c4f40de2dc23375f4786681ceefbf810f5b6afac37e563c0b8ebf6fd2e2901cb3e439bd0aa2502346722b06f5c91271cd6f40df01a382529aef458aa3b3da686a5288bad2423b2aeba019ab5b45571ea2b60b6a25200d8d9d7ace007e97365e205d9ce57fe515828b182fa217bd1e457bea5dbf72921382eb21d6ca10f67bc10aff553d682b9607b0d43ea1400b6fbe2cbe38e3834f0de66397c8c3ecaf4b45654f7aa3c10452457ee1c4c666f5f5fbe607ad3f73b5566c155252f2376ca306a3c7796b93f1e261866db5f550c0632623e61171dd9ea05a58cf252110a8ba263ae7bfd617756ffa0b93bef1ff9e99e239105b083c31f8018fe72efe8524c49819b7bf525eedd4864b4704990c421ec1333684c7763d3e9280220b213ccf75d3cb3f7e9b81244547a66faa94fb60bdd305ff492a32c733d4737eced8469c1f17690d69a1a0992230c2e8974d48862c5f3a9ac4498ac734362c8a12231b6c161a3cd8e4b7e2f07b850f7ba6ff96d8d46f3c08e98d44e5090986f2de0d02f26b603e0d36b3211645a7d13f27334f9df568e36b8cd23ba49ae056b4a15d2b7676456a592c4fa8f13d5242ff54670f75e57148bbc678e8e45e678e387c3e4cee0c8e6bf24b9b7847bb39f110ba351a9413ec4a7ecfacf6e9f97060af4a725d653f912b6cc2c89fed6618c443b0847186c09c3c3b54a2b759f4d8827df4716ae17ec277ad9d4449a014b65fbff63f550e31e3551f33a711e5aa6332fcd2103b4e07467bb8f40ece4081054ee8f03306d02c25add30928794081e5ecc8046fb63ef87367a0509a28f2d4141960a9f9e37fbb4d90938c7ca1a7e0d6230d28d7dd16e07ee0a2d53eda3bb66d92b28f8d856d9506303dbcc8b6beffb02b0911cdd4c0d165f18cdd32e32ad2aa2f6bb762bede79ca1f4c1727fa7f36728fe73c2e4983fc6039dab71904e903fc61a626653e7cb0679147a502599d88684e73e43a831ed62e69cd022c7df4a96fd72047ceba1df44f487c76aa1ecb8eaf7438761c8e552997bd21c9594a9391cee05261c27d9334d31616153fd7a8043e65981d8459b6c2c3703cf2baf3cfc408b18f1560589fe2450d7c156eb261da38386ba5818543e72f83945c2d32dd0312c8c929f01196974400b6a21a3cb5023f50462114787976bed5961ad633ef6572d8daa308337258f3ff0943b9e8da2df0ea58b6f68649f1da3beaf5573e772f4876b89dc7fe6998de71b88466ae50cff584514f0713ad6bafdf081a7aa93b3377790dd4b2dc3de33d4ecec3437e0ccb9f5e85bb181d4521b63f4cd6a495f3a8f88de55e214c54bdc2d867c94c607f18fd5b7463d5a99b70569bec50bf434c762ae3531cf2e871d90f6b81d9b1d47ae229d5bc96612dd9ef6c8a87bd536fd277e919db56624ef7a20070ba88740cc41b40fc1f347877a9298c006217970a2d92b999ea635d46a3a28ca0ce3b79e196ecf49179bc934545ad4871b4315a9d766fd74a973d16fed7035d8c0e3500b8aca11cd4378babbafbf2ef67fdff70d3868d43940b7a598eed6b6e189e9a83d8a41c76b938d6ff20ebd35d810c30fefbcb755e7a6a86a069766a4131b37df0d0c3d45c96b24807807e76958bc83e1c0272ad0a188a9b6bddda20f98d6cb2aea90dc6d61c5d7d984c4704e546be9c11f6657f9922b9715d5c69a85414a6b80fad3584f4dff1feed272ba72bfadaed1198312126abc1c0ca520e32ab6f53f0804a4402e67957dfc6733ea2ec456a1184258b52c10e29d3ffb88d75ec360be8e8249326ebf37ccbfd26eafd7cbc21e22bbdd6ca86c553d83a7a5818bc4a63bbd9bc8e101a5c137da4d22fe8fe0a8b67461a30d3f6eb1ccc6c930680a64e63af2459d19779bfcc958228e59eb5e1df9824c2f26783e562a11ddd14d1f16a4302cfb18f0cbf48988f3915896bfa7ccd102d0ca27e7d88747982986480e232338c2609665453af4aef0c5fa23fa6752eec161eae999840a2bd5a8c1c9b9e5186c755b4ac52f0cf64b634af9955542b2873d8bc14f50ca291305551fbf2c148f60d169367358edc8e2ec7b9d19bb43cfd928ee30c7b424eb8a91ee0b821f66a0f759a52d12808359d6dd2a7dbb3661d3b1c2abda9ca68072ea67d6f6d5695e6b1f13deacf9e11ebcbb4dbb861af44caf9bdfc062820c125938cfad68548c4c19ba37d19d0970339a2e44454c0ab49cc8124049ff942f4b5efd8c617e6cfbd15d504a29ea0a2a8306b15a99f11e3ef8bc0735dcbfb3662240f9706da95b3ecf32df5851e2a143b87bdc0fde783d35138d9737ecadb7be5d9cd0fd1ac26be6d9df3bd6b3197641492816b7301a81ab16d1686b41973a18460b5ee16355203aeac53be58f590316c9749a29b83605fa52d08c7e72efc0a6bbb577b66bb2a54303e1e7800bd4252f8aaf0ef4a51fb185c0c2796a22849093affa4fd7e68af34d64709d1f179a7d7f505c3248f0e84fcb9c13726da7f3e26101bf28032f80cdb83b91b3e1ad88bec4795b056da440303d93aff24bd44fc4911f868f1d912f3d36a41a718cd589443560879c2298ef5791ccedc654dfe82373864083216b8b273a672effe41750253a25aa467918ad4983e4e8b166370a3fc9302512360aaf94360e48dc3f7e870d9c3acac29a9e52ac8258f527c8cf9308bf844e21f50ad1b0b3769b4ee8626ab9e9caaa32fa51ee8801e7e7b56c70f45fca22f655b4f53626f147085ae1f1008f1e3ea7b1f2c1b58f439529240ab9088565af13a1dac5b1780498fb0bc8c919a43a5901f736831e7e50e0459f0741b10bff3415271c360bfb75503723d1b492d5c882b87934bf89f8a34118def39d6f344f01438be09b733cfc30cba04cebe15d58299e837098c7fe8cdaa261cd88595730c50701434024943916ef6dae88b02b5da16d79401a655bdbc9b0e3cb74d21e371f31d911f7aa966d5a1e3d73d36e40c1fc0c4ab4baaead849d2de71274b3c41eafa6a5091d6de31d789f250463419aac850670bb97d007e536c80e0b66fc9c7adf85a78f7430673c4026b7eed8723842970448fbdfb91b2b626edc8150f32dcf29f834838c6ed25df1fd77d86a03ff39393e99c740faa8b5b7b1d72a0d357660a6690f9aa1e87e2ee52527170ce0c182cc04507902e83e7783bdcfc1c6d83c3ea81218919f2800dad7d0371d951862a1341cdd7a930eca61059a6e7e8a28bc90ded6054fd50d676f51098d6ece1d4fd1c235ec63db01207a4352542b506fe59fa0a9a46a18c48d19e37dfc5abfed9cee7130fc7b29fb152b6dae4c35cee1d85e7a88d14be98b2e8c2053b9426c8c18105d100db9bdad3ae8ed806f57c93c381a3070f753d53ddd95161d0fc17bc9a728a1feb17c8d1c9263f448524511b73df090b3e9fd624ddfdb2e56697126931b305978251ee79f73f9f4082a813e6dea3e6a1b9592be402e277625c814a0aab695dc6c1c65579d460c307b4c7161732e42eec0296161b4c1cddfc0eb130c6df56e5fea3459c639dc2e776df839e9a2656dea9c66bd4839632e5e8776573ebbe26fdd198af4b71dc79a9c63eb88b90e25a4eb840a1beab6e6c995bd28f775bc1619f9218de85ce8e0adf2d60ac685fc48dc1b06a6b69095ae2180d845ed3bd32e518ff397f8fe48a69dd5f4e64c866f992ca8cd3277111bf4e54574b58d7862fd55379924f0fd0ed40cd970ff2ac2bbbac16a26ec98e88f74432587d42b6806b349d5df7cf8e7dd4ebcfd7da6fa0dc33aac84832b8a97fed0aee7925ae45e9201bc2e45ddcf8145d795542144c633010e1d51d4a2ff5d467e87a9415cbfc1f568c1755dc4bf23ea29287ad588b8df0cd75883fbf8d18a644c6be36e022a1cebb4aed953f23ffeb9027ea89ab4917cead9bdc85ac788bd70e28f010cfd80ddcb8d0edeec479133b16a730da6ac9344ba465f33d5688b7d96d3e473de585545ba7c85726042b4643a06e89653bb6d586c6c81a0261996e92dce7b3cebff0e964d825e4b58534e14d08cfae46cf7cfae24b1a59e4667993c2cd4d47416912d57fb2608cecd1f15a199fa21e3a425f0a046fa2a28833aaf80b4251972155af222b6422d0a8034c1953e3e2bb1168f157ceb9f3800eac095168fbdd380b5765d3bfae5ad3e44caa703c368764e28e3219ed17a9c32e630b5ed5c7d9d076abaa710069b3780458ba660a6a0bb1b5038566afc3efde3e6909cb95c0b02d31acb1fbb869e321cfdff8c54739e58aec57b9e92cd6455869e3eae11d9694525b96424c86609fd507ffe6770874a78a1c9768f515e620d3adfdfa3c6d7b708fe3c2fdfdbdf29a4460803b6a61804846db64daa0cc6fb1462589b0fb83dde9096816c43b0cffec2f50d9633ef341906a766e2eb46a969319597eec4080be943472c54b932d51df6419c76d962f6eb22c16d0600e408aea4a1dbc9d767bcc6a7e8c8ba8a69c17cbab4f59bf2a1f588d753f9bf4c999a6bd13dfac72d03aced663e8b84cfa0fff2c7f17a22fe55555bec29cc2083d48c47db79711348ecc15d5bae945d4f94450cfd7e6d3f0d8be1994e9518ad27315152d038555542a5d32504d6c07a3732e3edb75c655f38783c645831161b530d93bcc21d5adac904763b1e79cb446cb74c359c589a45eee83935754b1491959b5d9efed5a29ce678476886cc3e986393a2aed9e5f14a7b19586851387806d8ca62bc5e35602b81c441709fcfdeefc96070e54a3fc1a99da19ffb3ae244bbc43cb201fc12e33d99ef6453fa98ca6fb6143e8d87c48d2f3fbbb0fd0e4155aee4dfc70f523223c6c2a4d03570b9b27dc1d88bd0bf687d873ab8cdfb64387980aa087de59f163fd404fc8c696149ce8b6ad83fe3ae795154393b23b0ea3b4bb6077a7b709d8d8170ab0cd5e8d0cc510e7217bdc557f3616ae989fbbc26d7637175c92784522e86c604e79e5cd7b307249adae8011e0a5835355cd6bed32248f4ecf444c0512e422fadd6996248dbb527d0936816a8588c3fb285f2b81dd78fb21452aaad67cf6eac19dc72043e43bbe517cde9247b485c5bc4b317d805354ea1db1e246ac18cd08643929d171b150c27de692c1ec076c22dbf3e54e7848ba4846aac3171af67344b1a2314996afe0c9982278a6662df3745bc892bf918987d5a1431bd14704f89c5ed75bd2a441452ad1016a517fc29ab89d104835c42391990262a9db45509e0c6de353543de5cd21db94e7b53f7f2d01b418ba5d822e0160ac9581e9d11e597a35795e914e03cf34785d00c61b09e597f006d6d2a235d53c448cbb391ec3b1fc73415a5578bca18cf617776ebed1d48f93fef14263772cc8150b55b0758ec76790eaaeed78127e392f28ffe3d34d476560cc837138b912ee6e8c930d785ac56b73f3666c8e548f1e7d3e2d2d4a95dbf824ab7a8535fefb34ca5dbd85d06c427e49e279c30ab2adb2eaad69da1700c1f340f4eb4d7e08ce81bfedbe4c2ac700a62d6ee48c6b166c43f716d7a5ca6de41f60460d3d0118336176a0745892eed3ad3290dc6354327f074ee8e1014772993eff2370cc66f7d14ff5b1bc81f9da31165fe22528b2a238fa934a4c917832ef61c5805de07490007023be6020e6f348dc4e776696620675067beaafb745fad739291e31440f682c609925b4f41ccf0093d6d6be683f2232f2f74d6fd4e2efe041c23c6694294b1db14737ca8f432903acf455d4be3da39a97352c2c50efa4cfcddb9d79f0df9653fb1baa79df913cb66b0f1573f24017caf8797a2d4dd7d9e7a0c1b958c6770e869b8131ba461b2aef4118784d03dc5afac8ad4bb14abdac2c542319ae6ba4444ca93e46cb245f6b432b3aad2e8c16f66e10e700dc8c4916b0d33d2fafa0ba29b4eb34da2c6c029b675f7ddf95c62f002a68d53b3c9361c56d53129a050794a914d91c5c42796b855ab7fa20ba4dd9c40de0718799acda970ffd98601623732f079d63ded7c5f0b7c19687e4e282b0016aa771dd18db8f1c8ccf6beb695dce77c5f55e2c7e2921d2772e8ba5c14f39e8be0c27a6ca83d5e76d1c8c7bad2d4f4c863d614e5b5fd9f43f17f986d46322f5280fa7d55c3e55fc40e4e561f12d7efb278d4e0c006372153a962776cf84389b89a45fe99063c60a3e7391f37b8fdbea67efdc333b0a152ee9a42ce85e2766dff5d31d0e1b04712d9331634ba3ea1702d6db471a734d5fc999ebad3b45e3697fae8860741e15715e5fa700f2a50fef402c4eecf69378192912219753d887034001209cfa935c0a5ed17a4624de36c1aee3092cbf884f008703e8ca0cad2274e2aa573830ec41d90d11e328fc996469c0bc136a68bc0c81aa39d2b37f8f35709090b587b527cfda34ab747a180347320c8a25ff7a6ef04ab6e5bed419901c1320768da778e057bbbc0bc45429e9eae6831374d176c1036c14a30de53cd800f949f44e3d858d661bc872f1e49151924e9ee66c272104280e8247deba2b57995f43930c5b3beb6ef1b2dbcb93a6f4bdfbc9c6207b59082c953583980dc5958c37e5d62186497590cc9fd6e2550b5ffb959206d5c11635223bb8fa8b15098391def7b66787757da93e5e77a6ade84145bbf9bc7551c0bdcaad3d9898695b46f2b477ad8d8f974d53a4dd2f46e5f604868ed7ddefb9a6ddc3e483acc7871e6f3f5631d34a4bcecd27b53acded320b906ceaa771767f2824e28dce1f47a612242c7038080021fb4fab666ffe1e02d1739ef82cb36aaedb582cfb7723fedb06e3f766f94ed71561d86ee1a0002a2829e708463757de4fbb90020f260dc271115976f8d5191ac86c00131d4ea8d8803cf0cf9c46196e5fcfa5b5725aadeeb3e81e2d0c655a168a74440fc987b0051c17e9c1d61f0d09c0ff4129c8769d998d6bec05201bb4be0b64b11019082dd45996889538d24df7bda8c4f3407bba200553b2f973876b98256d320cbb4815891ff990a9abe31d86029c9d3d37361fd5a28a5aa2d021f2eead7d3bf52451e083c4c36fbfc861a642031dd4027fb33b59e0e01e013e9177503e5f6e764471d466f3b6b3226c45f06aae445f917e35435676da88c409563196188b63b2e2e14a0a10f3272d855ceda5ce0d6de70005bca4b381c24a308cf69c71f22d29362b96dcf34fc02b5852cd7999c910ba93b808250022c143c0d1438cd7fd9d49f3c2c73e5956bc3f3aa94499190a24b661350f5deb751cc8feef704c4457d89e13ed37d5c4d43d9ba291e8263f59de8d8072c361048b2b85777884612f60d8418175a7bed843223eca8c197c52f4f9043238c9a6b7fa6af16096d306e09ee6d2cbbfff7de654278265f2065e37bd2ef2c4fdf16a024f8dc94418a88ab02cb79404e2c56e10bf326bfd42e514d991a255fdb86219c5ee93bf6bc043d297f3bb43a5783fb00715028e40daa47202af6344ce658325a2aaead50e4b053fead9a19ff8d1c39d1b77f1e0e2751c5c6486702e3a1f96a60dbee2591ad348d13bd3ed2a239bdbd64facce41044779579a510cb7ea57dded139b3992071c5bae7d1b644a9fc911d454c5b5ff385892192aa4b451ac9a520b9993b7caf92b19d616abbca71991a019c733145f29d7cc47c2655603d1e8f124fd98ef17dcb1137783d0becc0911c882e82333e61cf9ca0599de66958b293e3f8d5b2ba5411658ddac7eefb454eb7bb5ba220d2a8ce8c7fdc2aa9644ac7d3acfdee4cca45436118e19f8ea4a9c611dffdbe5e118455a9ba1acee4eb3cb59cb4192fae072c40baa9f6ff03d2dd0354e0f831e232e0b5ac4cfcaa2493e6e3c410db17799eb76f6863ffbabf4344d4701bd07736fb85389b9905e1ec0d9c7ad0f6c6a3fc685b2c763110b7adc10659e02266d62b77370a239f3f4644edaff481d5efc8e83142ad01fe55658f7b52254946038a0df18ebef8f7e39566526cdadb1ea75e021b20175ee6a58b5b67a2f0fcee9ce186ba3c4bee841077287dcda17f37d015c09b2d6680211c1bf5673b99fc79ec27f5b5e20576de2a6aae8d6987f7256def89d2014984d5f8217b5f571b9c8824106b5d9e657ce15211ea526e5272747916cb941f1579b0118e86d492ebd3eeba155974e3be0d0517d0d970f8ae4e9b54040982630eb7c64b3588a62cfcf79ddec9e2be77a93e369f145967bb8480f938bb769d1d2be312632989338b94a71b87e89cfd3eb5166d80f4941f9692df6b37670f27ded1a065c6ea87aed56d37e20badcacc099cc25d3221ae6720a814a90d25e6401b4c71be1ad737a4937db5f509d0ff3f4cbd4b48a84d8f375e7048e3f256cfd1f606e90113b3f486809c367a1c9c79fb715dbff52743c0b8a29b8b8f6bdf6fe11822b6102ac07958af1e0826905287a22f27e359c81e880e93c5d4d5fd3d0baa05ea634d1bb49fcfaff972fd9d13d869cdce7a3b88daf426ff30417672d731370c03d09f09e44bce77a9815cdfa8cd3f732d067c5c469d2e0e2cedec681c426092353a0070b90cfca317326fb0e9543302e159394d2618ccf49cdd2dcad4874d7fd6ee75feb72ab1dabbb221754d805531fa77b9535f0447b9e7da014a2be35fbe8a588cb5b9505c790b2fb249e5f5a935001390156ad58c8f26861e6b4530581581812c18ef773823ab510a2e5997b1a00feebc0d86ee7fb407fedba158e47eeca41d5c9d61345c307398b44ec7123f9e5982508e4a9da54640d3736508d7bbc64f93bf8db33d10009859bf3f4c0197ee5131a699202341a26329b744031e6c2786ebac6a6a814f7f9f1f12f947695b07450f52783cf15499a565e867826a0cb454823604a7d084f2a5fa34b62cee9e5fbe3ba4179a076e13244531effbf82da6c4e8bd7913b783b414552611a48cf1eb4bc0171a0abe21f9d1b985ddf89f0eb86a9ad37f4880f4c845edc6a690eb49bd11860b8de9dd7c874dff2d9fddbf8a7d293af142170d50254bd38fd9fd8c73c0b0407773ef0e726e1fae619934029d4965031963358a429bb70a787e3e31edd114772c2301779d18d3bd4a646a3ca3c92997b03aea1448b9a1ed4a501eab3d41ccba94a92307255fd01bd98a396b6aa6bbf82b54fa2e6b4e949b7b1ebfbd85b8953760b8b3108c538d30bef4","isRememberEnabled":true,"rememberDurationInDays":30,"staticryptSaltUniqueVariableName":"5fac5dada27fd52bd5d7343e2bae50c0"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
